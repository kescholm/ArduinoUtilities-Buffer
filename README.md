# ArduinoUtilities-Buffer

A small library for circular buffers.

## Prerequisites

Install [Platform.IO](https://docs.platformio.org/en/latest/) for your IDE. If you want to use the command line, append `"$HOME/.platformio/penv/bin"` to your `PATH` environment variable as instructed by [platformio documentation](https://docs.platformio.org/en/latest/core/installation.html#install-shell-commands).

## Use the Library with Platform.IO or Arduino

In your project, simply add this library in your platform.ini file:

```ini
; Library dependencies
lib_deps =
    ArduinoUtilities-Buffer
```

For more information about libraries for Platform.IO, read up on the [Library Dependency Finder](https://docs.platformio.org/en/latest/librarymanager/ldf.html#ldf)

### Example Usage

First set the buffer parameters:

```cpp
#include <stdint.h>
#include "ArdBuffer.h"
// buffer object
ArdBuffer buffer;
```

## Setup for Development

If using VS Code, you can easily [install recommended extensions](https://code.visualstudio.com/docs/editor/extension-gallery#_recommended-extensions) for this project.

### Format Source Files

Source formatting uses LLVM's [Clang Format](https://clang.llvm.org/docs/ClangFormat.html) and the configuration is provided in [`.clang-format`](.clang-format). The configuration is based on default Google style (generated by clang-format version 10.0.0) with `IndentWidth` set to 4 and `ColumnLimit` set to 100.

### Unit Testing

Please read up on Platform.IO unit testing here: [https://docs.platformio.org/en/latest/plus/unit-testing.html](https://docs.platformio.org/en/latest/plus/unit-testing.html). Unit tests are in the `test` folder.

For native unit test, simply run

```sh
pio test -e native
```

For embedded testing with hardware connected by serial ports, set proper upload ports and optionally modify platform.ini with different boards. For example:

```sh
pio test -e esp32 --upload-port /dev/ttyUSB0
pio test -e atmega328 --upload-port /dev/ttyUSB1
```
